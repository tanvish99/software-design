<div class="p-4 md:p-6">

    <!-- ===== Dashboard Title with Export Button ===== -->
    <div class="flex justify-between items-center mb-4">
        <h1 class="text-2xl font-semibold">Dashboard</h1>
        <p-button 
            label="Export to PDF" 
            icon="pi pi-file-pdf" 
            severity="danger"
            (onClick)="exportToPDF()"
            [disabled]="loading">
        </p-button>
    </div>

    <!-- ===== Summary Cards ===== -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

        <p-card class="shadow-md">
            <div class="text-center">
                <p class="text-sm text-muted-color">Total Income</p>
                <p class="text-green-600 text-2xl font-bold mt-2">${{ totalIncome | number }}</p>
            </div>
        </p-card>

        <p-card class="shadow-md">
            <div class="text-center">
                <p class="text-sm text-muted-color">Total Expenses</p>
                <p class="text-red-600 text-2xl font-bold mt-2">${{ totalExpense | number }}</p>
            </div>
        </p-card>

        <p-card class="shadow-md">
            <div class="text-center">
                <p class="text-sm text-muted-color">Balance</p>
                <p class="text-primary text-2xl font-bold mt-2">${{ balance | number }}</p>
            </div>
        </p-card>

    </div>

    <!-- ===== Charts Section ===== -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

        <!-- Pie Chart -->
        <p-card header="Expense Breakdown" class="shadow-md">
            <div class="h-[300px]" #pieChartContainer>
                <p-chart type="pie" [data]="pieData" [options]="pieOptions"></p-chart>
            </div>
        </p-card>

        <!-- Bar Chart -->
        <p-card header="Income vs Expenses (6 months)" class="shadow-md">
            <div class="h-[300px]" #barChartContainer>
                <p-chart type="bar" [data]="barData" [options]="barOptions"></p-chart>
            </div>
        </p-card>

    </div>

    <!-- ===== Latest Transactions ===== -->
    <div class="mt-8">
        <p-card header="Recent Transactions" class="shadow-md">
            <p-table [value]="transactions" class="mt-3" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Type</th>
                        <th>Category</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Note</th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-t>
                    <tr>
                        <td>
                            <p-tag 
                                [severity]="getSeverity(t.type)"
                                [value]="t.type">
                            </p-tag>
                        </td>
                        <td>{{ t.category }}</td>
                        <td>{{ t.amount | number:'1.2-2' }}</td>
                        <td>{{ t.date | date:'mediumDate' }}</td>
                        <td>{{ t.note }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-card>
    </div>

</div>